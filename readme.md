# DStatus

<div align="center">
    <img src="static/img/logo.svg" alt="DStatus Logo" width="160"/>
    <p>ä¸€ä¸ªç°ä»£åŒ–çš„æœåŠ¡å™¨çŠ¶æ€ç›‘æ§é¢æ¿</p>
</div>

> ğŸ¨ è®¾è®¡ç†å¿µï¼šç®€çº¦è€Œä¸ç®€å•ï¼Œä¼˜é›…ä¸”å®ç”¨

DStatus é‡‡ç”¨ç°ä»£åŒ–çš„è®¾è®¡è¯­è¨€ï¼Œå°†åŠŸèƒ½æ€§ä¸ç¾è§‚æ€§å®Œç¾ç»“åˆã€‚é€šè¿‡ TailwindCSS å®ç°çš„å“åº”å¼ç•Œé¢ï¼Œä¸ºç”¨æˆ·å¸¦æ¥æµç•…çš„ç›‘æ§ä½“éªŒã€‚

## âœ¨ è®¾è®¡ç‰¹ç‚¹

### ç•Œé¢è®¾è®¡
- ğŸ¯ ç®€æ´ç›´è§‚çš„å¡ç‰‡å¼å¸ƒå±€
- ğŸŒˆ æŸ”å’Œçš„è‰²å½©è¿‡æ¸¡åŠ¨ç”»
- ğŸ“± å®Œç¾é€‚é…ç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯
- ğŸŒ™ æ™ºèƒ½çš„æ˜æš—ä¸»é¢˜åˆ‡æ¢
- ğŸ“Š ä¼˜é›…çš„æ•°æ®å¯è§†åŒ–

### äº¤äº’ä½“éªŒ
- âš¡ æµç•…çš„æ‹–æ‹½æ’åº
- ğŸ”„ å¹³æ»‘çš„çŠ¶æ€æ›´æ–°åŠ¨ç”»
- ğŸ‘† ç›´è§‚çš„è§¦æ§æ“ä½œ
- ğŸ¯ ç²¾ç¡®çš„æ•°æ®ç­›é€‰
- ğŸ’« ç»†è…»çš„è¿‡æ¸¡æ•ˆæœ

### è§†è§‰é£æ ¼
- ğŸ“Š æ¸…æ™°çš„æ•°æ®å±‚çº§
- ğŸ¨ èˆ’é€‚çš„é…è‰²æ–¹æ¡ˆ
- ğŸ”¤ ä¼˜é›…çš„å­—ä½“æ’ç‰ˆ
- ğŸ–¼ï¸ ç²¾è‡´çš„å›¾æ ‡è®¾è®¡
- ğŸ“± å“åº”å¼å¸ƒå±€é€‚é…

## ğŸ“¸ ç•Œé¢é¢„è§ˆ

<div align="center">
    <table>
        <tr>
            <td align="center">
                <strong>ğŸŒ™ æš—é»‘æ¨¡å¼</strong><br/>
                <img src="docs/images/dark-mode.png" alt="Dark Mode" width="400"/>
            </td>
        </tr>
        <tr>
            <td align="center">
                <strong>ğŸ“± ç§»åŠ¨ç«¯è§†å›¾</strong><br/>
                <img src="docs/images/mobile-view.png" alt="Mobile View" width="200"/>
            </td>
        </tr>
    </table>
</div>

![GitHub](https://img.shields.io/github/license/fev125/dstatus)
![Node Version](https://img.shields.io/badge/node-%3E%3D12-brightgreen)
![Express Version](https://img.shields.io/badge/express-4.18.2-blue)
![TailwindCSS](https://img.shields.io/badge/tailwindcss-3.4.1-blue)

## ğŸš€ æŠ€æœ¯æ ˆ

### åç«¯
- **è¿è¡Œç¯å¢ƒ**: Node.js (>=12)
- **Webæ¡†æ¶**: Express.js
- **æ•°æ®åº“**: SQLite3 (better-sqlite3)
- **æ¨¡æ¿å¼•æ“**: Nunjucks
- **WebSocket**: Socket.IO, Express-WS
- **SSHè¿æ¥**: node-ssh
- **å®šæ—¶ä»»åŠ¡**: node-schedule
- **é€šçŸ¥æœåŠ¡**: node-telegram-bot-api

### å‰ç«¯
- **UIæ¡†æ¶**: TailwindCSS
- **æ„å»ºå·¥å…·**: PostCSS
- **æ‹–æ‹½æ’åº**: SortableJS
- **ç»ˆç«¯æ¨¡æ‹Ÿ**: WebSSH
- **å®æ—¶æ›´æ–°**: WebSocket

### å¼€å‘å·¥å…·
- **åŒ…ç®¡ç†**: npm
- **å¼€å‘æœåŠ¡**: nodemon
- **CSSå¤„ç†**: autoprefixer, cssnano
- **å¹¶å‘æ‰§è¡Œ**: concurrently

## ğŸ’¡ æ ¸å¿ƒåŠŸèƒ½

### 1. æœåŠ¡å™¨ç›‘æ§
- âš¡ CPU ä½¿ç”¨ç‡å®æ—¶ç›‘æ§
- ğŸ’¾ å†…å­˜å ç”¨åŠ¨æ€æ˜¾ç¤º
- ğŸŒ å¸¦å®½ä½¿ç”¨å®æ—¶ç»Ÿè®¡åŠå†å²å¸¦å®½æ•°æ®
- ğŸ“Š æµé‡ç»Ÿè®¡å›¾è¡¨å±•ç¤ºæ”¯æŒæœ€é•¿12ä¸ªæœˆ
- ğŸ’¿ ç¡¬ç›˜ä½¿ç”¨æƒ…å†µç›‘æ§ï¼ˆå¾…å®ç°ï¼‰


### 2. åˆ†ç»„ç®¡ç†
- ğŸ“‚ æœåŠ¡å™¨åˆ†ç»„åˆ›å»ºä¸ç¼–è¾‘
- ğŸ”„ åˆ†ç»„æ‹–æ‹½æ’åº
- ğŸ‘€ åˆ†ç»„å±•å¼€/æŠ˜å 
- ğŸ·ï¸ åˆ†ç»„é‡å‘½å
- ğŸ—‘ï¸ åˆ†ç»„åˆ é™¤ä¿æŠ¤

### 3. æœåŠ¡å™¨ç®¡ç†
- â• ä¸€é”®æ·»åŠ æœåŠ¡å™¨
- ğŸ”‘ SSHå¯†ç /å¯†é’¥è®¤è¯
- ğŸ“‹ æ‰¹é‡æ“ä½œåŠŸèƒ½
- ğŸ”„ çŠ¶æ€è‡ªåŠ¨åˆ·æ–°
- ğŸ” æœåŠ¡å™¨æœç´¢è¿‡æ»¤

### 4. æ•°æ®å±•ç¤º
- ğŸ“Š å¤šç§è§†å›¾æ¨¡å¼ï¼ˆå¡ç‰‡/åˆ—è¡¨ï¼‰
- ğŸŒ“ è‡ªé€‚åº”æš—è‰²æ¨¡å¼
- ğŸ“± å“åº”å¼å¸ƒå±€è®¾è®¡
- ğŸ”„ æ•°æ®å®æ—¶æ›´æ–°
- ğŸ“ˆ å†å²æ•°æ®ç»Ÿè®¡

### 5. è¿ç»´åŠŸèƒ½
- ğŸ’» WebSSH åœ¨çº¿ç»ˆç«¯
- ğŸ“ å¸¸ç”¨è„šæœ¬ç®¡ç†
- ğŸ”” çŠ¶æ€å˜æ›´é€šçŸ¥
- ğŸ“¥ æ‰¹é‡è„šæœ¬æ‰§è¡Œï¼ˆå¾…å®ç°ï¼‰
- ğŸ”’ å®‰å…¨è®¿é—®æ§åˆ¶

### 6. é€šçŸ¥ç³»ç»Ÿ
- ğŸ“± Telegram æœºå™¨äººé€šçŸ¥
- âš ï¸ æœåŠ¡å™¨ç¦»çº¿æé†’
- ğŸ”” èµ„æºå‘Šè­¦é€šçŸ¥
- ğŸ“Š å®šæœŸçŠ¶æ€æŠ¥å‘Šï¼ˆå¾…å®ç°ï¼‰
- ğŸ”• é€šçŸ¥å…æ‰“æ‰°æ—¶æ®µï¼ˆå¾…å®ç°ï¼‰

## ğŸ› ï¸ å¿«é€Ÿå¼€å§‹

### Docker éƒ¨ç½²ï¼ˆæ¨èï¼‰

1. å…‹éš†é¡¹ç›®
```bash
git clone https://github.com/fev125/dstatus.git
cd dstatus
```

2. æ„å»ºå¹¶å¯åŠ¨æœåŠ¡
```bash
# é»˜è®¤ç«¯å£ï¼šWebç®¡ç†ç•Œé¢ 5555ï¼Œè¢«æ§ç«¯é€šä¿¡ç«¯å£ 9999
docker-compose up -d

# å¦‚éœ€ä¿®æ”¹ç«¯å£ï¼Œå¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡æŒ‡å®šï¼š
WEB_PORT=8080 CONTROL_PORT=8888 docker-compose up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps
```

3. è®¿é—®ç®¡ç†é¢æ¿
- æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://your-ip:5555`
- é»˜è®¤ç®¡ç†å‘˜å¯†ç : `nekonekostatus`
- é¦–æ¬¡ç™»å½•åè¯·ç«‹å³ä¿®æ”¹å¯†ç 

### ç›®å½•è¯´æ˜
```
dstatus/
â”œâ”€â”€ database/     # æ•°æ®æ–‡ä»¶ç›®å½•
â”‚   â””â”€â”€ db.db     # SQLite æ•°æ®åº“æ–‡ä»¶
â””â”€â”€ logs/         # æ—¥å¿—ç›®å½•
    â”œâ”€â”€ access.log # è®¿é—®æ—¥å¿—
    â””â”€â”€ error.log  # é”™è¯¯æ—¥å¿—
```

### å¸¸ç”¨æ“ä½œå‘½ä»¤
```bash
# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
docker-compose logs -f

# é‡å¯æœåŠ¡
docker-compose restart

# åœæ­¢æœåŠ¡
docker-compose down

# æ›´æ–°ä»£ç å¹¶é‡æ–°éƒ¨ç½²
git pull
docker-compose up -d --build
```

### ä¸€é”®è„šæœ¬å®‰è£…

CentOS 7+ / Debian 10+ / Ubuntu 18.04+

```bash
wget https://raw.githubusercontent.com/fev125/dstatus/main/install.sh -O install.sh && bash install.sh
```

### æ‰‹åŠ¨å®‰è£…

1. ç¯å¢ƒè¦æ±‚
   - Node.js 12+
   - gcc/g++ 8.x+
   - git

2. å®‰è£…ä¾èµ–
```bash
# CentOS
yum install epel-release centos-release-scl git nodejs devtoolset-8-gcc* -y

# Debian/Ubuntu
apt update && apt install nodejs npm git build-essential -y
```

3. å…‹éš†ä»£ç 
```bash
git clone https://github.com/fev125/dstatus.git
cd dstatus
npm install
```

4. å¯åŠ¨æœåŠ¡
```bash
# ç›´æ¥è¿è¡Œ
node dstatus.js

# ä½¿ç”¨ PM2
npm install pm2 -g
pm2 start dstatus.js

# ä½¿ç”¨ systemd
echo "[Unit]
Description=DStatus
After=network.target

[Service]
Type=simple
Restart=always
RestartSec=5
ExecStart=/path/to/dstatus/dstatus.js

[Install]
WantedBy=multi-user.target" > /etc/systemd/system/dstatus.service

systemctl daemon-reload
systemctl enable dstatus
systemctl start dstatus
```

## âš™ï¸ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡
```env
NODE_ENV=production
PORT=5555
SESSION_SECRET=your_session_secret
TELEGRAM_BOT_TOKEN=your_bot_token
```

### é…ç½®æ–‡ä»¶ (config.js)
```javascript
module.exports = {
  // æœåŠ¡å™¨é…ç½®
  server: {
    port: process.env.PORT || 5555,
    session_secret: process.env.SESSION_SECRET
  },
  
  // æ•°æ®åº“é…ç½®
  database: {
    path: './database/db.db'
  },
  
  // Telegram é…ç½®
  telegram: {
    token: process.env.TELEGRAM_BOT_TOKEN,
    chat_id: your_chat_id
  }
}
```

## ğŸ“š API æ–‡æ¡£

### è®¤è¯æ¥å£
- POST `/api/auth/login` - ç”¨æˆ·ç™»å½•
- POST `/api/auth/logout` - ç”¨æˆ·ç™»å‡º

### æœåŠ¡å™¨ç®¡ç†
- GET `/api/servers` - è·å–æœåŠ¡å™¨åˆ—è¡¨
- POST `/api/servers` - æ·»åŠ æœåŠ¡å™¨
- PUT `/api/servers/:id` - æ›´æ–°æœåŠ¡å™¨ä¿¡æ¯
- DELETE `/api/servers/:id` - åˆ é™¤æœåŠ¡å™¨

### åˆ†ç»„ç®¡ç†
- GET `/api/groups` - è·å–åˆ†ç»„åˆ—è¡¨
- POST `/api/groups` - åˆ›å»ºåˆ†ç»„
- PUT `/api/groups/:id` - æ›´æ–°åˆ†ç»„
- DELETE `/api/groups/:id` - åˆ é™¤åˆ†ç»„

### ç›‘æ§æ•°æ®
- GET `/api/stats/:server_id` - è·å–æœåŠ¡å™¨çŠ¶æ€
- GET `/api/stats/:server_id/history` - è·å–å†å²æ•°æ®

## ğŸ”’ å®‰å…¨å»ºè®®

1. ä¿®æ”¹é»˜è®¤å¯†ç 
2. ä½¿ç”¨åå‘ä»£ç†ï¼ˆå¦‚ Nginxï¼‰å¹¶å¯ç”¨ HTTPS
3. é…ç½®è®¿é—®æ§åˆ¶
4. ä½¿ç”¨ SSH å¯†é’¥è®¤è¯
5. å®šæœŸå¤‡ä»½æ•°æ®

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯
3. æäº¤å˜æ›´
4. å‘èµ· Pull Request

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ™ è‡´è°¢

- æ„Ÿè°¢ [NekoNekoStatus](https://github.com/nkeonkeo/nekonekostatus) é¡¹ç›®çš„å¯å‘
- æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…çš„ä»˜å‡º