{# æ ¹æ®å›½å®¶ä»£ç æ˜¾ç¤ºå¯¹åº”çš„å›½æ——å›¾æ ‡ #}
{%- macro get_flag(country_code, flag_url) -%}
    {%- if flag_url and flag_url.startsWith('http') -%}
        <img src="{{ flag_url }}" alt="{{ country_code }}" class="flag-img" title="{{ country_code }}">
    {%- else -%}
        {%- if country_code == "CN" -%}
            ğŸ‡¨ğŸ‡³
        {%- elif country_code == "HK" -%}
            ğŸ‡­ğŸ‡°
        {%- elif country_code == "TW" -%}
            ğŸ‡¹ğŸ‡¼
        {%- elif country_code == "JP" -%}
            ğŸ‡¯ğŸ‡µ
        {%- elif country_code == "KR" -%}
            ğŸ‡°ğŸ‡·
        {%- elif country_code == "SG" -%}
            ğŸ‡¸ğŸ‡¬
        {%- elif country_code == "US" -%}
            ğŸ‡ºğŸ‡¸
        {%- elif country_code == "CA" -%}
            ğŸ‡¨ğŸ‡¦
        {%- elif country_code == "UK" or country_code == "GB" -%}
            ğŸ‡¬ğŸ‡§
        {%- elif country_code == "DE" -%}
            ğŸ‡©ğŸ‡ª
        {%- elif country_code == "FR" -%}
            ğŸ‡«ğŸ‡·
        {%- elif country_code == "AU" -%}
            ğŸ‡¦ğŸ‡º
        {%- elif country_code == "RU" -%}
            ğŸ‡·ğŸ‡º
        {%- elif country_code == "UA" -%}
            ğŸ‡ºğŸ‡¦
        {%- elif country_code == "BR" -%}
            ğŸ‡§ğŸ‡·
        {%- elif country_code == "IN" -%}
            ğŸ‡®ğŸ‡³
        {%- elif country_code == "ZA" -%}
            ğŸ‡¿ğŸ‡¦
        {%- elif country_code == "CL" -%}
            ğŸ‡¨ğŸ‡±
        {%- elif country_code == "LO" -%}
            ğŸ 
        {%- elif country_code == "OT" -%}
            ğŸŒ
        {%- else -%}
            ğŸŒ
        {%- endif -%}
    {%- endif -%}
{%- endmacro -%}

{# æ£€æŸ¥æ˜¯å¦æœ‰å›½æ——å›¾ç‰‡URL #}
{%- if node and node.data and node.data.location and node.data.location.country and node.data.location.country.flag and node.data.location.country.flag.startsWith('http') -%}
    {{ get_flag(code, node.data.location.country.flag) }}
{%- else -%}
    {{ get_flag(code, '') }}
{%- endif -%}
